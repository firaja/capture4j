sudo: false

language: java

matrix:
  include:
    - name: OpenJDK 8
      jdk: openjdk8
    - name: OpenJDK 11
      jdk: openjdk11
      before_install:
        - rm "${JAVA_HOME}/lib/security/cacerts"
        - ln -s /etc/ssl/certs/java/cacerts "${JAVA_HOME}/lib/security/cacerts"

cache:
  directories:
    - $HOME/.m2

install:
  # https://github.com/travis-ci/travis-ci/issues/8408
  - unset _JAVA_OPTIONS

before_script:
  - pip install --user codecov

script:
  - mvn clean verify -B -U

after_success:
  - bash <(curl -s https://codecov.io/bash)